<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>√ñƒürenci Y√∂netimi</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1f2937;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            display: flex;
            gap: 20px;
        }

        h1 {
            color: #60a5fa;
        }

        .form-card {
            flex: 1;
            background: #374151;
            padding: 20px;
            border-radius: 15px;
            height: fit-content;
        }

        input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background: #4b5563;
            border: none;
            color: white;
            border-radius: 5px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: #10b981;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            opacity: 0.9;
        }

        .list-card {
            flex: 2;
            background: #374151;
            padding: 20px;
            border-radius: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #4b5563;
        }

        th {
            color: #9ca3af;
        }

        .delete-btn {
            background-color: #ef4444;
            padding: 5px 10px;
            border-radius: 5px;
            text-decoration: none;
            color: white;
            font-size: 12px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #9ca3af;
            text-decoration: none;
        }
    </style>
</head>

<body>
    <a href="/patron/" class="back-link">‚Üê Panele D√∂n</a>
    <h1>üéì √ñƒürenci Y√∂netimi</h1>

    <div class="container">
        <div class="form-card">
            <h3>Yeni √ñƒürenci Ekle</h3>
            <form method="POST">
                {% csrf_token %}
                <input type="text" name="ad" placeholder="Ad" required>
                <input type="text" name="soyad" placeholder="Soyad" required>
                <input type="text" name="kullanici_adi" placeholder="Kullanƒ±cƒ± Adƒ± (Giri≈ü i√ßin)" required>
                <input type="text" name="sifre" placeholder="≈ûifre" required>
                <input type="text" name="oda_no" placeholder="Oda No (√ñrn: A-101)" required>
                <input type="number" name="depozito" placeholder="Depozito Tutarƒ±" required>
                <button type="submit">‚ûï Sisteme Kaydet</button>
            </form>
        </div>

        <div class="list-card">

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3>Kayƒ±tlƒ± √ñƒürenciler ({{ ogrenciler|length }})</h3>

                <form method="GET" style="display: flex; gap: 5px;">
                    <input type="text" name="q" placeholder="ƒ∞sim veya Oda No ara..."
                        style="margin:0; padding: 8px; width: 200px;">
                    <button type="submit" style="width: auto; padding: 8px 15px; background: #60a5fa;">üîç Ara</button>
                    {% if request.GET.q %}
                    <a href="/patron/ogrenciler/"
                        style="padding: 8px; background: #4b5563; color: white; text-decoration: none; border-radius: 5px; display:flex; align-items:center;">‚úñ</a>
                    {% endif %}
                </form>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Ad Soyad</th>
                        <th>Oda</th>
                        <th>Kullanƒ±cƒ± Adƒ±</th>
                        <th>ƒ∞≈ülem</th>
                    </tr>
                </thead>
                <tbody>
                    {% for ogrenci in ogrenciler %}
                    <tr>
                        <td>
                            <a href="/patron/ogrenci-detay/{{ ogrenci.id }}/"
                                style="color: #60a5fa; text-decoration: none; font-weight: bold;">
                                {{ ogrenci.kullanici.first_name }} {{ ogrenci.kullanici.last_name }}
                            </a>
                            {% if ogrenci.borcu_var_mi %}
                            <span
                                style="background: #ef4444; color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px; margin-left: 5px;">
                                ‚ö†Ô∏è Bor√ßlu
                            </span>
                            {% endif %}
                        </td>
                        <td>{{ ogrenci.oda_no }}</td>
                        <td>{{ ogrenci.kullanici.username }}</td>
                        <td>
                            <a href="/patron/ogrenci-sil/{{ ogrenci.id }}/" class="delete-btn"
                                onclick="return confirm('Silmek istediƒüine emin misin?')">Sil</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" style="text-align: center; color: #9ca3af;">Aradƒ±ƒüƒ±nƒ±z kriterde √∂ƒürenci
                            bulunamadƒ±.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>